(this.webpackJsonptodolist=this.webpackJsonptodolist||[]).push([[0],{154:function(t,e,n){},281:function(t,e,n){"use strict";n.r(e);var a=n(0),c=n.n(a),i=n(10),s=n.n(i);n(154),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var r,o,l=n(18),d=n(20),u=n(41),j=n(8),b=n(126),O=n.n(b).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"ed866548-b66a-44f9-8f52-2b761c116c4c"}}),f=function(){return O.get("todo-lists")},h=function(t){return O.post("todo-lists",{title:t})},m=function(t){return O.delete("todo-lists/".concat(t))},g=function(t,e){return O.put("todo-lists/".concat(e),{title:t})},T=function(t){return O.get("todo-lists/".concat(t,"/tasks"))},p=function(t,e){return O.post("todo-lists/".concat(t,"/tasks"),{title:e})},x=function(t,e){return O.delete("todo-lists/".concat(t,"/tasks/").concat(e))},I=function(t,e,n){return O.put("todo-lists/".concat(t,"/tasks/").concat(e),n)},v=function(t){return O.post("auth/login",t)},S=function(){return O.delete("auth/login")},k=function(){return O.get("auth/me")};!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(r||(r={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(o||(o={}));var y=function(t,e){t(w(e)),t(A("failed"))},L=function(t,e){e.messages.length?t(w(e.messages[0])):t(w("Some error occurred")),t(A("failed"))},E={isLoggedIn:!1},D=function(t){return{type:"LOGIN/SET-IS-LOGGED-IN",value:t}},C={status:"idle",error:null,isInitialized:!1},A=function(t){return{type:"APP/SET-STATUS",status:t}},w=function(t){return{type:"APP/SET-ERROR",error:t}},P={},N=function(t,e,n){return{type:"UPDATE-TASK-ENTITY-STATUS",entityStatus:t,todolistId:e,taskId:n}},R=function(t,e,n){return function(a,c){var i=c().tasks[t].filter((function(t){return t.id===e}))[0];if(i){var s=Object(j.a)({title:i.title,status:i.status,priority:i.priority,description:i.description,deadline:i.deadline,startDate:i.startDate},n);a(N("loading",t,e)),a(A("loading")),I(t,e,s).then((function(n){0===n.data.resultCode?(a(function(t,e,n){return{type:"UPDATE-TASKS",taskID:t,payload:e,todoListsID:n}}(e,s,t)),a(A("succeeded")),a(N("succeeded",t,e))):n.data.messages.length&&(a(w(n.data.messages[0])),a(A("failed")),a(N("failed",t,e)))})).catch((function(t){y(a,t.message)}))}}},G=[],K=function(){return function(t){t(A("loading")),f().then((function(e){return t({type:"SET-TODOLISTS",todolists:e.data}),t(A("succeeded")),e.data})).then((function(e){e.forEach((function(e){var n;t((n=e.id,function(t){t(A("loading")),T(n).then((function(e){t(function(t,e){return{type:"SET-TASKS",task:t,todolistId:e}}(e.data.items,n)),t(A("succeeded"))}))}))}))}))}},U=n(75),z=n(127),F=Object(U.b)({tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"REMOVE-TASK":return Object(j.a)(Object(j.a)({},t),{},Object(u.a)({},e.todoListsID,t[e.todoListsID].filter((function(t){return t.id!==e.taskId}))));case"ADD-TASK":var n=e.task;return Object(j.a)(Object(j.a)({},t),{},Object(u.a)({},e.task.todoListId,[n].concat(Object(d.a)(t[e.task.todoListId]))));case"UPDATE-TASKS":return Object(j.a)(Object(j.a)({},t),{},Object(u.a)({},e.todoListsID,t[e.todoListsID].map((function(t){return t.id===e.taskID?Object(j.a)(Object(j.a)({},t),e.payload):t}))));case"ADD-TODOLIST":return Object(j.a)(Object(j.a)({},t),{},Object(u.a)({},e.todolist.id,[]));case"REMOVE-TODOLIST":var a=Object(j.a)({},t);return delete a[e.todoListsID],a;case"SET-TODOLISTS":var c=Object(j.a)({},t);return e.todolists.forEach((function(t){return c[t.id]=[]})),c;case"SET-TASKS":var i=Object(j.a)({},t);return i[e.todolistId]=e.task,i;case"UPDATE-TASK-ENTITY-STATUS":return Object(j.a)(Object(j.a)({},t),{},Object(u.a)({},e.todolistId,t[e.todolistId].map((function(t){return t.id===e.taskId?Object(j.a)(Object(j.a)({},t),{},{entityTaskStatus:e.entityStatus}):t}))));case"LOGIN/CLEAR-DATA":return{};default:return t}},todoLists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"REMOVE-TODOLIST":return t.filter((function(t){return t.id!==e.todoListsID}));case"ADD-TODOLIST":var n=Object(j.a)(Object(j.a)({},e.todolist),{},{filter:"all",entityStatus:"idle"});return[n].concat(Object(d.a)(t));case"CHANGE-TODOLIST-FILTER":return t.map((function(t){return t.id===e.todoListsID?Object(j.a)(Object(j.a)({},t),{},{filter:e.filter}):t}));case"CHANGE-TODOLIST-TITLE":return t.map((function(t){return t.id===e.todoListsID?Object(j.a)(Object(j.a)({},t),{},{title:e.title}):t}));case"SET-TODOLISTS":return e.todolists.map((function(t){return Object(j.a)(Object(j.a)({},t),{},{filter:"all",entityStatus:"idle"})}));case"SET-ENTITY-STATUS":return t.map((function(t){return t.id===e.todolistId?Object(j.a)(Object(j.a)({},t),{},{entityStatus:e.entityStatus}):t}));case"LOGIN/CLEAR-DATA":return[];default:return t}},app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"APP/SET-STATUS":return Object(j.a)(Object(j.a)({},t),{},{status:e.status});case"APP/SET-ERROR":return Object(j.a)(Object(j.a)({},t),{},{error:e.error});case"APP/SET-IS-INITIALIZE":return Object(j.a)(Object(j.a)({},t),{},{isInitialized:e.isInitialize});default:return t}},auth:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"LOGIN/SET-IS-LOGGED-IN":return Object(j.a)(Object(j.a)({},t),{},{isLoggedIn:e.value});default:return t}}}),M=Object(U.c)(F,Object(U.a)(z.a));window.store=M;var H=n(325),V=n(326),q=n(327),Y=n(318),B=n(283),J=n(321),W=n(329),Z=n(330),$=n(328),_=n(322),Q=n(282),X=n(27),tt=n(331),et=n(319),nt=n(2),at=c.a.memo((function(t){var e=Object(a.useState)(""),n=Object(X.a)(e,2),c=n[0],i=n[1],s=Object(a.useState)(!1),r=Object(X.a)(s,2),o=r[0],l=r[1],d=function(){var e=c.trim();e?t.addItem(e):l(!0),i("")};return Object(nt.jsxs)("div",{children:[Object(nt.jsx)(tt.a,{variant:"outlined",size:"small",value:c,onChange:function(t){l(!1),i(t.currentTarget.value)},onKeyPress:function(t){"Enter"===t.key&&d()},label:"Title",error:o,helperText:o&&"Title is required!",disabled:t.disabled}),Object(nt.jsx)(Y.a,{disabled:t.disabled,onClick:d,children:Object(nt.jsx)(et.a,{})})]})})),ct=c.a.memo((function(t){var e=Object(a.useState)(t.title),n=Object(X.a)(e,2),c=n[0],i=n[1],s=Object(a.useState)(!1),r=Object(X.a)(s,2),o=r[0],l=r[1],d=function(){l(!1),t.changeTitle(c)};return o?Object(nt.jsx)(tt.a,{value:c,autoFocus:!0,onBlur:d,onChange:function(t){i(t.currentTarget.value)},onKeyPress:function(t){"Enter"===t.key&&d()}}):Object(nt.jsx)("span",{onDoubleClick:function(){return l(!0)},children:t.title})})),it=n(320),st=n(139),rt=n(333),ot=["task","todoListsID","changeTaskTitle"],lt=c.a.memo((function(t){var e=t.task,n=t.todoListsID,c=t.changeTaskTitle,i=Object(st.a)(t,ot),s=Object(a.useCallback)((function(t){return c(e.id,t,n)}),[c,e.id,n]),o=e.status===r.Completed?"is-Done":"";return Object(nt.jsxs)("li",{children:[Object(nt.jsxs)("span",{className:o,children:[Object(nt.jsx)(rt.a,{size:"small",color:"primary",checked:e.status===r.Completed,onChange:function(t){return i.changeTaskStatus(e.id,t.currentTarget.checked?r.Completed:r.New,n)},disabled:"loading"===e.entityTaskStatus}),Object(nt.jsx)(ct,{title:e.title,changeTitle:s})]}),Object(nt.jsx)(Y.a,{"aria-label":"delete",onClick:function(){return i.removeTask(e.id,n)},disabled:"loading"===e.entityTaskStatus,children:Object(nt.jsx)(it.a,{})})]},e.id)})),dt=c.a.memo((function(t){var e=t.todoListsID,n=t.todolist,c=t.tasks,i=t.removeTask,s=t.addTask,o=t.changeTaskTitle,l=t.changeTodoListFilter,d=t.changeTodoListTitle,u=t.changeTaskStatus,j=t.removeTodoList,b=c;"active"===n.filter&&(b=b.filter((function(t){return t.status===r.New}))),"completed"===n.filter&&(b=b.filter((function(t){return t.status===r.Completed})));var O=Object(a.useCallback)((function(t,e){return i(t,e)}),[i]),f=Object(a.useCallback)((function(t,e,n){return u(t,e,n)}),[u]),h=Object(a.useCallback)((function(t,e,n){return o(t,e,n)}),[o]),m=b.map((function(t){return Object(nt.jsx)(lt,{todoListsID:e,task:t,removeTask:O,changeTaskStatus:f,changeTaskTitle:h},t.id)})),g=Object(a.useCallback)((function(t){return d(t,e)}),[d,e]),T=Object(a.useCallback)((function(t){return s(t,e)}),[s,e]),p=Object(a.useCallback)((function(){return j(e)}),[j,e]),x=Object(a.useCallback)((function(){return l("all",e)}),[l,e]),I=Object(a.useCallback)((function(){return l("active",e)}),[l,e]),v=Object(a.useCallback)((function(){return l("completed",e)}),[l,e]);return Object(nt.jsxs)("div",{children:[Object(nt.jsxs)("h3",{children:[Object(nt.jsx)(ct,{title:n.title,changeTitle:g}),Object(nt.jsx)(Y.a,{"aria-label":"delete",onClick:p,disabled:"loading"===n.entityStatus,children:Object(nt.jsx)(it.a,{})})]}),Object(nt.jsx)(at,{addItem:T,disabled:"loading"===n.entityStatus}),Object(nt.jsx)("ul",{style:{listStyle:"none",padding:"0px"},children:m}),Object(nt.jsxs)("div",{children:[Object(nt.jsx)(J.a,{style:{marginLeft:"2px"},size:"small",variant:"all"===n.filter?"contained":"outlined",color:"all"===n.filter?"primary":"secondary",onClick:x,children:"All"}),Object(nt.jsx)(J.a,{style:{marginLeft:"2px"},size:"small",variant:"active"===n.filter?"contained":"outlined",color:"active"===n.filter?"primary":"secondary",onClick:I,children:"Active"}),Object(nt.jsx)(J.a,{style:{marginLeft:"2px"},size:"small",variant:"completed"===n.filter?"contained":"outlined",color:"completed"===n.filter?"primary":"secondary",onClick:v,children:"Completed"})]})]})})),ut=n(14),jt=function(){var t=Object(l.c)((function(t){return t.todoLists})),e=Object(l.c)((function(t){return t.tasks})),n=Object(l.c)((function(t){return t.auth.isLoggedIn})),c=Object(l.b)();Object(a.useEffect)((function(){n&&c(K())}),[]);var i=Object(a.useCallback)((function(t,e){c(function(t,e){return function(n){n(A("loading")),n(N("loading",t,e)),x(t,e).then((function(a){0===a.data.resultCode?(n(function(t,e){return{type:"REMOVE-TASK",taskId:t,todoListsID:e}}(e,t)),n(A("succeeded")),n(N("succeeded",t,e))):a.data.messages.length&&(n(w(a.data.messages[0])),n(A("failed")),n(N("failed",t,e)))})).catch((function(t){y(n,t.message)}))}}(e,t))}),[c]),s=Object(a.useCallback)((function(t,e){c(function(t,e){return function(n){n(A("loading")),p(t,e).then((function(t){0===t.data.resultCode?(n({type:"ADD-TASK",task:t.data.data.item}),n(A("succeeded"))):t.data.messages.length&&(n(w(t.data.messages[0])),n(A("failed")))})).catch((function(t){y(n,t.message)}))}}(e,t))}),[c]),r=Object(a.useCallback)((function(t,e,n){c(R(n,t,{status:e}))}),[c]),o=Object(a.useCallback)((function(t,e,n){c(R(n,t,{title:e}))}),[c]),d=Object(a.useCallback)((function(t){var e;c((e=t,function(t){t(A("loading")),t(function(t,e){return{type:"SET-ENTITY-STATUS",entityStatus:"loading",todolistId:e}}(0,e)),m(e).then((function(n){0===n.data.resultCode?(t({type:"REMOVE-TODOLIST",todoListsID:e}),t(A("succeeded"))):L(t,n.data)})).catch((function(e){y(t,e.message)}))}))}),[c]),u=Object(a.useCallback)((function(t){c(function(t){return function(e){e(A("loading")),h(t).then((function(t){0===t.data.resultCode?(e({type:"ADD-TODOLIST",todolist:t.data.data.item}),e(A("succeeded"))):L(e,t.data)})).catch((function(t){y(e,t.message)}))}}(t))}),[c]),j=Object(a.useCallback)((function(t,e){var n=function(t,e){return{type:"CHANGE-TODOLIST-FILTER",todoListsID:t,filter:e}}(e,t);c(n)}),[c]),b=Object(a.useCallback)((function(t,e){c(function(t,e){return function(n){n(A("loading")),g(t,e).then((function(a){0===a.data.resultCode?(n(function(t,e){return{type:"CHANGE-TODOLIST-TITLE",todoListsID:t,title:e}}(e,t)),n(A("succeeded"))):L(n,a.data)})).catch((function(t){y(n,t.message)}))}}(t,e))}),[c]);if(!n)return Object(nt.jsx)(ut.a,{to:"/login"});var O=t.map((function(t){var n=e[t.id];return Object(nt.jsx)(_.a,{item:!0,children:Object(nt.jsx)(Q.a,{elevation:5,style:{padding:"20px"},children:Object(nt.jsx)(dt,{todoListsID:t.id,tasks:n,todolist:t,removeTask:i,changeTodoListFilter:j,addTask:s,changeTaskStatus:r,removeTodoList:d,changeTaskTitle:o,changeTodoListTitle:b})})},t.id)}));return Object(nt.jsxs)(nt.Fragment,{children:[Object(nt.jsx)(_.a,{container:!0,style:{padding:"20px 0px"},children:Object(nt.jsx)(at,{addItem:u})}),Object(nt.jsx)(_.a,{container:!0,spacing:5,children:O})]})},bt=n(335),Ot=n(332);function ft(t){return Object(nt.jsx)(Ot.a,Object(j.a)({elevation:6,variant:"filled"},t))}function ht(){var t=Object(l.c)((function(t){return t.app.error})),e=Object(l.b)(),n=function(t,n){"clickaway"!==n&&e(w(null))};return Object(nt.jsx)(bt.a,{open:null!==t,autoHideDuration:6e3,onClose:n,children:Object(nt.jsx)(ft,{onClose:n,severity:"error",children:t})})}var mt=n(336),gt=n(317),Tt=n(323),pt=n(324),xt=n(138),It=n(74),vt=function(){var t=Object(l.c)((function(t){return t.auth.isLoggedIn})),e=Object(l.b)(),n=Object(xt.a)({initialValues:{email:"",password:"",rememberMe:!1},validationSchema:It.a({password:It.b().min(4,"Must be 4 characters or more").required("Required"),email:It.b().email("Invalid email address").required("Required")}),onSubmit:function(t){var a;e((a=t,function(t){t(A("loading")),v(a).then((function(e){0===e.data.resultCode?(t(D(!0)),t(A("succeeded"))):e.data.messages.length&&(t(w(e.data.messages[0])),t(A("failed")))})).catch((function(e){y(t,e.message)}))})),n.resetForm()}});return t?Object(nt.jsx)(ut.a,{to:"/"}):Object(nt.jsx)(_.a,{container:!0,justify:"center",children:Object(nt.jsx)(_.a,{item:!0,xs:4,children:Object(nt.jsxs)(mt.a,{children:[Object(nt.jsxs)(gt.a,{children:[Object(nt.jsxs)("p",{children:["To log in get registered",Object(nt.jsx)("a",{href:"https://social-network.samuraijs.com/",target:"_blank",children:"here"})]}),Object(nt.jsx)("p",{children:"or use common test account credentials:"}),Object(nt.jsx)("p",{children:"Email: free@samuraijs.com"}),Object(nt.jsx)("p",{children:"Password: free"})]}),Object(nt.jsx)("form",{onSubmit:n.handleSubmit,children:Object(nt.jsxs)(Tt.a,{children:[Object(nt.jsx)(tt.a,Object(j.a)({label:"Email",margin:"normal"},n.getFieldProps("email"))),n.touched.email&&n.errors.email&&Object(nt.jsx)("div",{style:{color:"red"},children:n.errors.email}),Object(nt.jsx)(tt.a,Object(j.a)({type:"password",label:"Password",margin:"normal"},n.getFieldProps("password")))," ",n.touched.password&&n.errors.password&&Object(nt.jsx)("div",{style:{color:"red"},children:n.errors.password}),Object(nt.jsx)(pt.a,{label:"Remember me",control:Object(nt.jsx)(rt.a,Object(j.a)({checked:n.values.rememberMe},n.getFieldProps("rememberMe")))}),Object(nt.jsx)(J.a,{type:"submit",variant:"contained",color:"primary",children:"Login"})]})})]})})})},St=function(){return Object(nt.jsxs)(nt.Fragment,{children:[Object(nt.jsx)("h1",{style:{textAlign:"center",fontSize:"55px"},children:"The page you're looking for can't be found! "}),Object(nt.jsx)("h3",{style:{textAlign:"center"},children:"Error 404"}),Object(nt.jsx)("div",{style:{textAlign:"center"},children:Object(nt.jsx)(J.a,{variant:"contained",color:"primary",onClick:function(){},children:"Ok"})})]})};function kt(){var t=Object(l.c)((function(t){return t.app.status})),e=Object(l.c)((function(t){return t.app.isInitialized})),n=Object(l.c)((function(t){return t.auth.isLoggedIn}));console.log("islog",n),console.log("isInitialized",e);var c=Object(l.b)();if(Object(a.useEffect)((function(){c((function(t){k().then((function(e){0===e.data.resultCode&&t(D(!0))})).finally((function(){t({type:"APP/SET-IS-INITIALIZE",isInitialize:!0})}))}))}),[]),!e)return Object(nt.jsx)("div",{style:{position:"fixed",top:"30%",textAlign:"center",width:"100%"},children:Object(nt.jsx)(H.a,{})});return Object(nt.jsxs)("div",{className:"App",children:[Object(nt.jsx)(V.a,{position:"static",children:Object(nt.jsxs)(q.a,{style:{justifyContent:"space-between"},children:[Object(nt.jsx)(Y.a,{color:"inherit",children:Object(nt.jsx)($.a,{})}),Object(nt.jsx)(B.a,{variant:"h6",children:"Todolists"}),n?Object(nt.jsx)(J.a,{onClick:function(){c((function(t){t(A("loading")),S().then((function(e){0===e.data.resultCode?(t(D(!1)),t(A("succeeded")),t({type:"LOGIN/CLEAR-DATA"})):e.data.messages.length&&(t(w(e.data.messages[0])),t(A("failed")))})).catch((function(e){y(t,e.message)}))}))},color:"inherit",variant:"outlined",children:"Log out"}):Object(nt.jsx)("div",{})]})}),"loading"===t&&Object(nt.jsx)(W.a,{}),Object(nt.jsx)(Z.a,{fixed:!0,children:Object(nt.jsxs)(ut.d,{children:[Object(nt.jsx)(ut.b,{path:"/login",render:function(){return Object(nt.jsx)(vt,{})}}),Object(nt.jsx)(ut.b,{exact:!0,path:"/",render:function(){return Object(nt.jsx)(jt,{})}}),Object(nt.jsx)(ut.b,{path:"/404",render:function(){return Object(nt.jsx)(St,{})}}),Object(nt.jsx)(ut.a,{from:"*",to:"/404"})]})}),Object(nt.jsx)(ht,{})]})}var yt=n(56);s.a.render(Object(nt.jsx)(l.a,{store:M,children:Object(nt.jsx)(yt.a,{children:Object(nt.jsx)(kt,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[281,1,2]]]);
//# sourceMappingURL=main.4680eaba.chunk.js.map